index
  // Template idea taken from QuillJS multi cursor module
  // https://github.com/quilljs/quill/blob/develop/src/modules/multi-cursor.js

  //put your code in app.proto.cursorColorForUser
  with cursorColorForUser(data.userId) as #bgColor
    each positions as #position, #i
      if #i === 0
        span.cursor(
        class="{{if isTop}}top{{/}}{{if isLeft}} left{{/}}{{if isRight}} right{{/}}"
        style="top:{{#position.top}}px; left:{{#position.left}}px; height:{{#position.height}}px;"
        )
          span.cursor-flag(as="$flag" style="background-color: {{#bgColor}};")
            //put your code in app.proto.cursorLabelForUser
            span.cursor-name() {{cursorLabelForUser(data.userId)}}
          span.cursor-caret(style="background-color: {{#bgColor}}; width:{{#position.width}}px;") &#65279;
      else
        span.cursor(
        class="{{if isTop}}top{{/}}{{if isLeft}} left{{/}}{{if isRight}} right{{/}}"
        style="top:{{#position.top}}px; left:{{#position.left}}px; height:{{#position.height}}px;"
        )
          span.cursor-caret(style="background-color: {{#bgColor}}; width:{{#position.width}}px;") &#65279;
